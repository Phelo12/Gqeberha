@using GqeberhaClinic.Areas.Identity.Data;
@using GqeberhaClinic.Models
@model GqeberhaClinic.Models.MedicalRefill
@using Microsoft.AspNetCore.Identity

@inject SignInManager<GqebheraUser> SignInManager
@inject UserManager<GqebheraUser> UserManager
@{
    
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Chronic.cshtml";
}
<div id="Header" class="bg-primary">
    <h1 class="m-1 text-center text-white">Report of Medical Prescriptions</h1>
</div>
<button id="btnPrint" class="btn btn-primary">
    Generate report
</button>
<div id="Information" class="row">
    <div class="col-8">
        <img src="~/images/logos/17.png" style="width:200px" />
        <p class="mt-3">Date of Report: @ViewBag.Date</p>
        <p class="mt-3">Time of Report: @ViewBag.Time</p>
    </div>
    <div class="col-4 justify-content-md-end">
        <h4>Patient Information</h4>
        <p>First Name: @UserManager.GetUserAsync(User).Result.FirstName</p>
        <p>Last Name: @UserManager.GetUserAsync(User).Result.LastName</p>
        <p>Email Address: @UserManager.GetUserAsync(User).Result.Email</p>
    </div>
</div>
<h3 class="text-center">Medical Prescriptions</h3>

<table id="REeport" class="table">
    <thead class="table-dark">
        <tr>
            <th>
                Doctor Information
            </th>
            <th>
                Medication Name
            </th>
            <th>
                Dosage
            </th>
            <th>
                Duration
            </th>
            <th>
                Notes
            </th>
            <th>
                Date of prescription
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (Prescription item in ViewBag.Pre)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Doctor.FirstName)
                    @Html.DisplayFor(modelItem => item.Doctor.LastName)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.MedicationName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Dosage)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Duration)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Notes)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.DatePrescribed)
                </td>
              
            </tr>
        }
    </tbody>
</table>
